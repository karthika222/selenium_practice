using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using OpenQA.Selenium.Internal;
using Polly;
using System.Security.Cryptography.X509Certificates;

namespace TestProject1
{
    public class Asserts : IDisposable
    {
        private IWebDriver driver;
        [SetUp]
        public void Setup()
        {

             driver = new ChromeDriver();
            driver.Navigate().GoToUrl("http://eaapp.somee.com/");
            IWebElement loginlink = driver.FindElement(By.Id("loginLink"));
            loginlink.Click();
        }

        //[Test]

       /* public void Test2()
        {
            driver = new ChromeDriver();
            driver.Navigate().GoToUrl("http://eaapp.somee.com/");
            driver.FindElement(By.Id("loginLink")).Click();

            driver.FindElement(By.Id("UserName")).SendKeys("admin");
            driver.FindElement(By.Id("Password")).SendKeys("password");
            driver.FindElement(By.CssSelector("input[type='submit']")).Click();

            // ✅ Assert: check if login was successful
            var loggedInUser = driver.FindElement(By.LinkText("Hello admin!"));
            Assert.That(loggedInUser.Text, Is.EqualTo("Hello admin!"));

        }*/
        [Test]
        public void SuccessfulLoginTest()
        {
           
        
            driver.FindElement(By.Id("UserName")).SendKeys("admin");
            driver.FindElement(By.Id("Password")).SendKeys("password");
            driver.FindElement(By.CssSelector("input[type='submit']")).Click();

            var element = driver.FindElement(By.LinkText("Hello admin!"));

            // ✅ check that element is visible
            Assert.IsTrue(element.Displayed);
           // TestContext.WriteLine("Login success message is displayed ✅");

        }

        public void Dispose()
        {
            if (driver != null)
            {
                driver.Quit();
                driver = null;
            }
        }
            [TearDown]
           public void TearDown()
            {
                driver.Dispose();
            }
        }
    }
